 import { GoogleGenerativeAI } from "@google/generative-ai";
// const {
//     GoogleGenerativeAI,
//   HarmCategory,
//   HarmBlockThreshold,
// } = require("@google/generative-ai");

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "AI trip generator"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "Okay, let's talk about building an AI trip generator! Here's a breakdown of how it would work, the different aspects involved, and some examples:\n\n**Core Functionality:**\n\nAt its heart, an AI trip generator would need to:\n\n1. **Gather User Input:**\n    * **Destination Type:** (e.g., Beach, City, Mountains, Adventure, Cultural)\n    * **Duration:** (e.g., Weekend trip, 1 week, 2 weeks)\n    * **Travel Dates:** (Specific dates or a flexible timeframe)\n    * **Budget:** (Approximate cost range)\n    * **Travel Style:** (e.g., Relaxing, Fast-Paced, Luxurious, Budget-Friendly)\n    * **Interests:** (e.g., Hiking, History, Food, Art, Nightlife)\n    * **Travelers:** (Number of people, age range, family with kids etc.)\n    * **Starting Location:** (Optional, if needed for transportation)\n    * **Transportation Preference:** (Flight, train, car, etc.)\n    * **Accommodation Preference:** (Hotel, Airbnb, Hostel, Camping, etc.)\n    * **Other Preferences:** (Accessibility needs, dietary restrictions, etc.)\n\n2. **Process and Analyze Data:**\n   * **Location Database:** A vast database of locations worldwide with associated information (e.g., popularity, average cost, climate, activities, opening hours, photos, user reviews).\n   * **Accommodation Data:** Real-time pricing and availability for hotels, hostels, and vacation rentals.\n   * **Transportation Data:** Flight, train, and bus schedules and prices.\n   * **Activity Data:** Information about attractions, tours, and events, including pricing and availability.\n   * **User Reviews:** Feedback from travelers to assess the quality of locations and activities.\n   * **Personalized Recommendations:** The AI would use the collected user input and the analyzed data to generate personalized suggestions. This is where machine learning is used to learn from user preferences and past travel data.\n\n3. **Generate Itinerary:**\n    * **Day-by-Day Breakdown:** Creating a detailed schedule of activities, meal suggestions, travel routes, and estimated costs.\n    * **Alternative Options:** Providing backup options in case certain activities are unavailable or unappealing.\n    * **Flexibility:** Allow users to adjust the generated itinerary by adding or removing items.\n    * **Integration with Booking:** Providing direct links to book accommodations, transportation, and tours.\n    * **Map Integration:** Visualizing the itinerary on a map for easy navigation.\n\n4. **User Interface:**\n    * **Intuitive Interface:** A user-friendly design for easy input and understanding.\n    * **Personalization Options:** Allowing users to save preferences and past trips.\n    * **Mobile Accessibility:** Offering functionality on mobile devices for travel on the go.\n\n**AI Techniques Involved:**\n\n* **Natural Language Processing (NLP):** To understand user input in natural language and to analyze text reviews.\n* **Machine Learning (ML):**\n    * **Recommendation Engines:** To suggest relevant destinations, activities, and accommodations based on user preferences.\n    * **Collaborative Filtering:** To use the data of other users with similar preferences.\n    * **Content-Based Filtering:** To recommend items similar to what the user has liked in the past.\n    * **Clustering:** To group locations based on shared attributes (e.g., popular beach towns).\n* **Constraint Satisfaction:** To ensure the generated itineraries are feasible based on time, budget, and availability.\n\n**Examples:**\n\n**Example 1: Budget Backpacking Trip in Southeast Asia**\n\n* **User Input:**\n    * Destination Type: Backpacking/Adventure\n    * Duration: 3 weeks\n    * Budget: Low\n    * Travel Style: Fast-Paced\n    * Interests: Culture, Hiking, Beaches, Food\n    * Starting Location: London\n    * Transportation Preference: Any (will need flights, buses and trains)\n* **AI Output:**\n    * Suggests a multi-city itinerary in Southeast Asia (e.g., Bangkok, Chiang Mai, Hanoi, Hoi An, Siem Reap).\n    * Suggests Hostels or budget guesthouses.\n    * Provides information about local food experiences, markets and hiking trails.\n    * Includes information about local transportation options (buses and trains).\n    * Includes links to local tours and activities.\n    * Budget estimate with cost breakdown for each location.\n\n**Example 2: Romantic Getaway to Paris**\n\n* **User Input:**\n    * Destination Type: City\n    * Duration: 4 days\n    * Budget: Medium-High\n    * Travel Style: Relaxing\n    * Interests: Culture, Fine Dining, Art\n    * Starting Location: New York City\n    * Transportation Preference: Flight\n    * Accommodation Preference: Hotel\n* **AI Output:**\n    * Recommends a centrally located hotel in Paris.\n    * Recommends must-see museums (Louvre, Mus√©e d'Orsay) and historical sites (Eiffel Tower, Notre Dame).\n    * Provides restaurant recommendations from Michelin starred restaurants to cute bistros.\n    * Includes options for romantic activities (river cruise, walking tours, picnics in a park).\n    * Suggestions on the best times to visit and how to purchase tickets in advance.\n\n**Challenges and Considerations:**\n\n* **Data Accuracy and Completeness:** Maintaining accurate information for locations, pricing, and availability.\n* **Real-Time Updates:** Ensuring that the data is up-to-date.\n* **Bias:** Addressing potential biases in the data and algorithms to ensure fairness.\n* **Handling Unexpected Events:** Integrating mechanisms to help users navigate unexpected travel disruptions (e.g., flight delays, cancellations).\n* **User Privacy:** Protecting user data and preferences.\n* **Scalability:** Scaling the system to handle a large number of users and locations.\n\n**Future Enhancements:**\n\n* **Dynamic Itinerary Adjustment:** Adapting itineraries in real-time based on user feedback and changing circumstances.\n* **Integration with AR/VR:** Allowing users to virtually explore destinations before booking.\n* **AI-Powered Travel Assistants:** Providing personalized recommendations and guidance throughout the trip via chatbot interfaces.\n* **Predictive Travel Planning:** Analyzing user data to anticipate future travel needs and preferences.\n\n**In conclusion, an AI trip generator has the potential to revolutionize the way we plan travel by providing personalized recommendations, streamlining the booking process, and enhancing the overall travel experience. However, development will require overcoming a number of significant challenges.**\n"},
        ],
      },
      {
        role: "user",
        parts: [
          {text: "Generate Travel Plan for Location :Las Vegas for 3  Days for Couple with a Cheap budget,give me Hotels options list with Hotelname,Hotel address,Price,hotel image url,geo coordinates, ticket Pricing,rating,Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.'"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "Okay, here's a JSON structure representing a possible 3-day budget-friendly trip to Las Vegas for a couple, with hotel options, attractions, estimated pricing, and travel times:\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Getaway for Two\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"location\": \"Las Vegas, Nevada\",\n    \"currency\": \"USD\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1385,\n            \"longitude\": -115.1650\n          },\n      \"price\": 50,\n      \"rating\": 3.7,\n       \"imageUrl\":\"https://media-cdn.tripadvisor.com/media/photo-s/1a/3d/54/f2/circus-circus-hotel-casino.jpg\"\n    },\n      {\n        \"hotelName\": \"Excalibur Hotel & Casino\",\n        \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0955,\n            \"longitude\": -115.1740\n          },\n        \"price\": 60,\n        \"rating\": 3.9,\n       \"imageUrl\":\"https://media-cdn.tripadvisor.com/media/photo-s/10/0e/c5/61/excalibur-hotel-casino.jpg\"\n    },\n     {\n      \"hotelName\": \"Luxor Hotel and Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0959,\n            \"longitude\": -115.1747\n          },\n      \"price\": 70,\n       \"rating\": 4.0,\n      \"imageUrl\":\"https://media-cdn.tripadvisor.com/media/photo-s/1a/39/e0/7b/luxor-hotel-casino.jpg\"\n    }\n  ],\n  \"dailyPlan\": [\n    {\n      \"day\": 1,\n      \"theme\": \"Exploring the Strip and Free Attractions\",\n      \"activities\": [\n          {\n              \"activityName\": \"Bellagio Conservatory & Botanical Gardens\",\n              \"description\": \"Stroll through the beautiful indoor garden display.\",\n               \"bestTimeToVisit\":\"Morning (10 AM-12 PM) or late evening (9 PM-11 PM)\",\n              \"ticketPrice\": 0,\n                 \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1738\n          },\n              \"travelTimeFromHotel\": \"Approx. 10-15 minutes walk from Excalibur and Luxor, 25 minutes from circus Circus\"\n          },\n         {\n            \"activityName\": \"Fountains of Bellagio Show\",\n            \"description\": \"Watch the iconic water show set to music.\",\n            \"bestTimeToVisit\": \"Afternoon (2PM - 5PM) or Evening (8 PM - 12 AM) - check schedule for show times\",\n             \"ticketPrice\": 0,\n               \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1738\n          },\n            \"travelTimeFromHotel\": \"Adjacent to Botanical gardens, Same travel time from hotels\"\n          },\n         {\n            \"activityName\": \"Walk the Las Vegas Strip\",\n            \"description\": \"Enjoy the vibrant atmosphere and free street performances.\",\n               \"bestTimeToVisit\":\"Anytime especially during the day\",\n            \"ticketPrice\": 0,\n            \"geoCoordinates\": {\n            \"latitude\": 36.1147,\n            \"longitude\": -115.1728\n              },\n               \"travelTimeFromHotel\": \"Start from any of the hotels and travel down the Strip\"\n         },\n          {\n             \"activityName\":\"Fremont Street Experience\",\n             \"description\": \"Walk under a massive LED canopy and enjoy free light shows\",\n               \"bestTimeToVisit\": \"Evening (6 PM - 11 PM)\",\n             \"ticketPrice\": 0,\n              \"geoCoordinates\": {\n            \"latitude\": 36.1700,\n            \"longitude\": -115.1414\n          },\n             \"travelTimeFromHotel\": \"approx. 20-30 minutes Drive from Hotels\"\n\n          }\n\n      ],\n       \"estimatedDayCost\": {\n          \"meals\": 40,\n            \"transportation\": 10,\n            \"activities\": 0,\n         \"total\": 50\n       }\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"Downtown Exploration and Affordable Entertainment\",\n      \"activities\": [\n          {\n              \"activityName\": \"Visit the Mob Museum\",\n              \"description\": \"Explore the history of organized crime.\",\n                \"bestTimeToVisit\": \"Morning (10AM-1PM)\",\n               \"ticketPrice\": 30,\n               \"geoCoordinates\": {\n            \"latitude\": 36.1718,\n            \"longitude\": -115.1438\n           },\n              \"travelTimeFromHotel\": \"approx. 20-30 minutes Drive from Hotels\"\n          },\n           {\n            \"activityName\": \"Container Park\",\n            \"description\": \"Explore the shops, restaurants and live music venues\",\n            \"bestTimeToVisit\": \"Afternoon (2PM-5PM)\",\n               \"ticketPrice\": 0,\n             \"geoCoordinates\": {\n            \"latitude\": 36.1667,\n            \"longitude\": -115.1383\n          },\n            \"travelTimeFromHotel\": \"5-10 minute walk from Mob Museum\"\n          },\n           {\n             \"activityName\":\"High Roller Observation Wheel (Optional)\",\n              \"description\":\"Enjoy the view of Las Vegas Strip from the Observation wheel\",\n               \"bestTimeToVisit\":\"Evening (7PM-10 PM)\",\n             \"ticketPrice\": 35,\n              \"geoCoordinates\": {\n            \"latitude\": 36.1167,\n            \"longitude\": -115.1683\n          },\n              \"travelTimeFromHotel\":\"15-20 minutes Drive from Container Park\"\n          }\n      ],\n      \"estimatedDayCost\": {\n          \"meals\": 50,\n          \"transportation\": 15,\n          \"activities\": 30,\n         \"total\": 95\n        }\n    },\n      {\n        \"day\": 3,\n        \"theme\":\"South Strip and Departure\",\n        \"activities\": [\n            {\n              \"activityName\":\"Welcome to Fabulous Las Vegas Sign\",\n              \"description\":\"Take memorable pictures at the iconic Las Vegas Sign.\",\n                 \"bestTimeToVisit\": \"Morning (9AM - 11AM) for less crowds or late evening\",\n              \"ticketPrice\":0,\n                 \"geoCoordinates\": {\n            \"latitude\": 36.0825,\n            \"longitude\": -115.1707\n          },\n                 \"travelTimeFromHotel\":\"5-10 minutes Drive from Hotels\"\n\n            },\n             {\n              \"activityName\":\"Explore the Mandalay Bay Shark Reef Aquarium\",\n               \"description\":\"Get up close and personal with a variety of amazing sea life.\",\n                 \"bestTimeToVisit\": \"Afternoon (1 PM-3PM)\",\n               \"ticketPrice\": 29,\n                 \"geoCoordinates\": {\n            \"latitude\": 36.0914,\n            \"longitude\": -115.1752\n          },\n                 \"travelTimeFromHotel\":\"5-10 minutes drive from the Welcome Sign\"\n             },\n              {\n                \"activityName\":\"Departure\",\n                \"description\":\"Head back to the airport or move to the next destination\",\n                   \"bestTimeToVisit\":\"Anytime\",\n                   \"ticketPrice\":0,\n                    \"geoCoordinates\": {\n            \"latitude\": 36.0825,\n            \"longitude\": -115.1707\n          },\n                 \"travelTimeFromHotel\":\"Depends on location\"\n              }\n        ],\n        \"estimatedDayCost\":{\n           \"meals\": 40,\n           \"transportation\": 15,\n            \"activities\": 29,\n          \"total\": 84\n        }\n      }\n  ],\n  \"notes\": [\n      \"Prices are estimated and may vary based on time of year and availability\",\n      \"Consider purchasing a day pass for public transportation\",\n        \"Wear comfortable walking shoes\",\n        \"Book flights in advance for better prices\"\n  ]\n}\n```\n\n**Explanation:**\n\n*   **`tripName`, `duration`, `budget`, `travelers`, `location`, `currency`:** Basic trip information.\n*   **`hotels`:** An array of hotel options with name, address, geo-coordinates, estimated price, rating, and an image URL for each.\n*   **`dailyPlan`:** An array containing the itinerary for each day.\n    *   **`day`:** The day number.\n    *   **`theme`:** A brief description of the day's focus.\n    *   **`activities`:** An array of planned activities for the day.\n        *   **`activityName`:** Name of the activity.\n        *   **`description`:** A short description.\n        *   **`bestTimeToVisit`:** Recommended time of day.\n        *    **`ticketPrice`:** Estimated entrance or activity cost.\n             *    **`geoCoordinates`:** Coordinates of the activity location.\n        *   **`travelTimeFromHotel`:** Estimated time to travel from listed hotels.\n      *    **`estimatedDayCost`:** Cost breakdown for meals, transportation, and activities\n*   **`notes`:** Additional tips and things to keep in mind.\n\n**How to Use:**\n\n1.  **Parse the JSON:** Use a JSON parser in your application or a programming language to read the data.\n2.  **Display Information:** Present the information to the user in a readable format (e.g., a web page, mobile app).\n3.  **User Interaction:** Allow users to choose hotels and activities, adjust plans, and get directions.\n\n**Important Considerations:**\n\n*   **Dynamic Pricing:** Hotel and ticket prices can fluctuate, so use real-time APIs for the most accurate cost estimates.\n*   **Transportation:** This plan mainly relies on walking and some public transport/ride sharing. Consider ride sharing apps for more flexibility.\n*   **Personalization:** Expand the JSON to include preferences, dietary needs, and other user-specific details for better customization.\n*   **Bookings:** Add links or integration to booking APIs to enable users to book hotels and activities directly.\n*   **Image URLs:** Make sure you are legally using the URLs.\n\nThis structured JSON provides a good starting point for a trip-generating app. You'll need to expand upon this to create a fully functional and dynamic system, but it lays out the core elements for a budget-friendly Las Vegas trip.\n"},
        ],
      },
    ],
  });

  
  
    